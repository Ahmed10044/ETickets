@using ETickets.ViewModel
@model MovieAndMovieActorsVM


<!-- Movie Form -->
<section id="movie-form" method="post" class="p-6 rounded-2xl bg-gray-900/70 shadow-xl max-w-3xl mx-auto">
    <!-- Header -->
    <div class="mb-6">
        <h2 class="font-semibold text-xl text-white">🎬 Edit Movie</h2>
    </div>

    <!-- Form -->
    <form asp-action="Edit" asp-controller="Movie" method="post" class="space-y-5">
        <!-- Title -->
        <div>
            <label class="block text-sm text-gray-300 mb-1">Title</label>
            <input type="text" placeholder="Enter movie title"
                   class="w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-700 focus:border-indigo-500 focus:ring focus:ring-indigo-500/50" name="Name" value="@Model.Movie.Name" />
            @* <span class="text-danger" asp-validation-for="Movie.Name"></span> *@

        </div>

        <!-- Description -->
        <div>
            <label class="block text-sm text-gray-300 mb-1">Description</label>
            <input rows="3" placeholder="Enter description"
                   class="w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-700 focus:border-indigo-500 focus:ring focus:ring-indigo-500/50" name="Description" value="@Model.Movie.Description">
            @* <span class="text-danger" asp-validation-for="Movie.Description"></span> *@

        </div>

        <!-- Price -->
        <div>
            <label class="block text-sm text-gray-300 mb-1">Price</label>
            <input type="number" placeholder="Enter price"
                   class="w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-700 focus:border-indigo-500 focus:ring focus:ring-indigo-500/50" name="Price" value="@Model.Movie.Price" />
            @* <span class="text-danger" asp-validation-for="Movie.Price"></span> *@

        </div>

        <!-- Poster Upload -->
        <div>
            <label class="block text-sm text-gray-300 mb-1">Poster</label>
            <input type="text"
                   class="w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4
                       file:rounded-lg file:border-0
                       file:text-sm file:font-semibold
                       file:bg-indigo-600 file:text-white
                       hover:file:bg-indigo-700" name="ImgUrl" value="@Model.Movie.ImgUrl" />
            @* <span class="text-danger" asp-validation-for="Movie.ImgUrl"></span> *@

        </div>


        <!-- Actors Select -->
        <div>
            <label class="block text-sm text-gray-300 mb-1">Actors</label>
            <select id="actors-select" name="actorId" class="bg-black text-white" multiple>
                <option disabled selected>Choose actors...</option>
                @foreach (var item in Model.ActorMovies)
                {
                    if (item.MovieId == Model.Movie.Id)
                    {
                    <option value="@item.Actor.Id" data-image="/images/cast/@item.Actor.ProfilePicture" selected>
                        @item.Actor.FirstName @item.Actor.LastName
                        </option>

                    }
                    else
                    {
                        <option value="@item.Actor.Id" data-image="/images/cast/@item.Actor.ProfilePicture" >
                            @item.Actor.FirstName @item.Actor.LastName
                        </option>
                    }
                }
            </select>
             @* <span class="text-danger" asp-validation-for="ActorMovie.ActorId"></span>  *@

        </div>



        <!-- Dates -->
        @* <div class="grid grid-cols-2 gap-4"> *@
            <div>
                <label class="block text-sm text-gray-300 mb-1">Start Date</label>
                <input type="date"
                       class="w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-700 focus:border-indigo-500 focus:ring focus:ring-indigo-500/50" name="StartDate" value="@Model.Movie.StartDate" />
                @* <span class="text-danger" asp-validation-for="Movie.StartDate"></span> *@

            </div>
            <div>
                <label class="block text-sm text-gray-300 mb-1">End Date</label>
                <input type="date"
                       class="w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-700 focus:border-indigo-500 focus:ring focus:ring-indigo-500/50" name="EndDate" value="@Model.Movie.EndDate" />
                @* <span class="text-danger" asp-validation-for="Movie.EndDate"></span> *@

            </div>
        @* </div> *@

        <!-- Status -->
        <div>
            <label class="block text-sm text-gray-300 mb-1">Status</label>
            <select class="w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-700 focus:border-indigo-500 focus:ring focus:ring-indigo-500/50" name="MovieStatus">
                @if(Model.Movie.MovieStatus==MovieStatus.Upcoming)
                {
                    <option value="0" selected>Upcoming</option>
                    <option value="1">Available</option>
                    <option value="2">Expired</option>
                }
                else if (Model.Movie.MovieStatus == MovieStatus.Available)
                {
                    <option value="0" >Upcoming</option>
                    <option value="1" selected>Available</option>
                    <option value="2">Expired</option>

                }
                else
                {
                    <option value="0" >Upcoming</option>
                    <option value="1">Available</option>
                     <option value="2" selected>Expired</option>
                }
            </select>
            @* <span class="text-danger"></span> *@

        </div>

        <!-- Category -->
        <div>
            <label class="block text-sm text-gray-300 mb-1">Category</label>
            <select class="w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-700 focus:border-indigo-500 focus:ring focus:ring-indigo-500/50" name="CategoryId">
                <option>Select Category</option>
                @foreach (var item in Model.Categories)
                {
                    if(item.Id== Model.Movie.CategoryId)
                    {
                        <option value="@item.Id" selected>@item.Name</option>

                    }
                    else
                    {
                        
                    <option value="@item.Id">@item.Name</option>
                    }

                }
            </select>
            @* <span class="text-danger" asp-validation-for="Movie.CategoryId"></span> *@

        </div>

        <!-- Cinema -->
        <div>
            <label class="block text-sm text-gray-300 mb-1">Cinema</label>
            <select class="w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-700 focus:border-indigo-500 focus:ring focus:ring-indigo-500/50" name="CinemaId">
                <option>Select Cinema</option>
                @foreach (var item in Model.Cinemas)
                {
                    if (item.Id == Model.Movie.CinemaId)
                    {
                        <option value="@item.Id" selected>@item.Name</option>

                    }
                    else
                    {

                        <option value="@item.Id">@item.Name</option>
                    }

                }
            </select>
            @* <span class="text-danger" asp-validation-for="Movie.CinemaId"></span> *@

        </div>

        <!-- Trailer -->
        <div>
            <label class="block text-sm text-gray-300 mb-1">Trailer URL</label>
            <input type="url" placeholder="https://youtube.com/..."
                   class="w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-700 focus:border-indigo-500 focus:ring focus:ring-indigo-500/50" name="TrailerUrl" value="@Model.Movie.TrailerUrl"/>
            @* <span class="text-danger" asp-validation-for="Movie.TrailerUrl"></span> *@

        </div>

        <!-- Submit -->
        <div class="flex justify-end gap-3">
            <button type="reset"
                    class="px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-500 transition">
                Cancel
            </button>
            <button type="submit"
                    class="px-4 py-2 rounded-lg bg-indigo-600 text-white hover:bg-indigo-700 transition">
                Save Movie
            </button>
        </div>
    </form>
</section>
